# RapidWire

RapidWireは、高度なカスタマイズ性と柔軟性を備えた、多機能なDiscordエコノミーボットです。サーバー独自の通貨作成、DEX（分散型取引所）機能、Pythonによるスマートコントラクト、請求システムなど、本格的な経済圏を構築するための機能を網羅しています。

WebベースのネットワークエクスプローラーとAPIも提供しており、外部連携も容易です。

## 主な機能

### 1. 高度な通貨管理 (Currency)
*   **独自通貨の発行**: サーバーごとに独自の通貨（トークン）を作成・管理できます。
*   **ライフサイクル管理**: 追加発行(Mint)、焼却(Burn)、機能放棄(Renounce)、通貨削除などの管理機能。
*   **信頼性の担保**: Mint権限の放棄や、通貨削除の待機期間（7-10日）、金利変更のタイムロック機能により、ユーザーへの信頼性を確保します。
*   **ステーキング**: ユーザーは通貨を預け入れ、日利設定に基づいた配当を得ることができます。

### 2. DEX & 流動性プール (AMM)
*   **スワップ (Swap)**: 異なる通貨同士を即座に交換できます。
*   **流動性プール**: 誰でも通貨ペアの流動性プールを作成・追加でき、手数料収入を得る機会を提供します。
*   **自動ルート検索**: 最適な交換ルートを自動で計算します。

### 3. スマートコントラクト (Smart Contracts)
*   **Pythonスクリプト**: ユーザーはPythonコードをコントラクトとして登録し、送金や特定のアクションをトリガーにロジックを自動実行できます。
*   **Discord連携**: 管理者が許可すれば、コントラクトからDiscordのロール付与やメッセージ送信などの操作が可能になります。
*   **拡張性**: 自動販売機、ギャンブル、会員権システムなどを自由に構築可能。

### 4. 請求 & 決済 (Claims)
*   **請求書**: ユーザー間で支払請求を作成・送信できます。
*   **通知管理**: 信頼できるユーザーからの請求のみ通知を受け取るなどの設定が可能です。

### 5. Webエクスプローラー & API
*   **ネットワークエクスプローラー**: トランザクション、通貨情報、コントラクト実行履歴などをWebブラウザから確認できます。
*   **RESTful API**: 外部アプリケーションからRapidWireの機能（残高確認、送金など）を安全に利用できます。

## 必要要件

*   Python 3.9以上
*   MySQL サーバー

## セットアップ手順

### 1. インストール

リポジトリをクローンし、ディレクトリに移動します。

```bash
git clone https://github.com/your-username/RapidWire.git
cd RapidWire
```

依存パッケージをインストールします。

```bash
pip install -r requirements.txt
```

### 2. 設定

`config.py.example` を `config.py` にコピーして編集します。

```bash
cp config.py.example config.py
```

`config.py` 内の以下の項目を設定してください：
*   **MySQL接続情報**: データベースのホスト、ユーザー、パスワード、DB名。
*   **Discord Token**: Botのトークン。
*   **API設定**: サーバーのホストとポート。

### 3. データベースの準備

MySQLデータベースを作成し、初期スキーマを適用します。

```bash
mysql -u [username] -p [database_name] < rapid-wire.sql
```

### 4. 実行

RapidWireは「Discord Bot」と「Web/APIサーバー」の2つのプロセスで構成されています。それぞれを起動してください。

**Discord Botの起動:**
```bash
python main.py
```

**Web/APIサーバーの起動:**
```bash
python server.py
```
※ デフォルトでは `http://localhost:8000` でWebエクスプローラーにアクセスできます。

## 主要コマンド一覧

| コマンド | 説明 |
| :--- | :--- |
| `/balance` | 保有資産（残高）を表示します。 |
| `/transfer` | 他のユーザーへ送金します。 |
| `/history` | 送金や取引の履歴を確認します。 |
| `/currency create` | 新しい通貨を作成します。 |
| `/currency info` | 通貨の詳細情報を表示します。 |
| `/stake deposit` | 通貨をステーキングして利息を得ます。 |
| `/swap` | 通貨をスワップ（交換）します。 |
| `/lp create` | 流動性プールを作成します。 |
| `/contract set` | スマートコントラクト（Pythonスクリプト）を設定します。 |
| `/claim create` | 他のユーザーへ支払いを請求します。 |

詳しい使い方は、Botのヘルプやドキュメントを参照してください。

## スマートコントラクトについて

スマートコントラクトのサンプルや書き方については、[`doc/sample_contracts.md`](./doc/sample_contracts.md) を参照してください。
